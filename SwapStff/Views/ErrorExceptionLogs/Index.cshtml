@model IEnumerable<SwapStff.Models.ErrorExceptionLogsModel>

@{
    ViewBag.Title = "Error and Exceptions Logs";
    Layout = "~/Views/Shared/_LayoutBackEnd.cshtml";
}

<!-- For Sorting & Paging -->
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.tablesorter.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.tablesorter.pager.js")" type="text/javascript"></script>
<script src="~/Scripts/footer.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $("table.tablesorter").tablesorter({ widthFixed: true, sortList: [[0, 0]] })
        .tablesorterPager({ container: $("#pager"), size: $(".pagesize option:selected").val() });
    });
</script>

<h2 class="text-center">Error and Exceptions Logs </h2>

<div class="MyTable">
    <table id="MyTable" class="tablesorter">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.EventId)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.LogDateTime)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Source)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Message)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.QueryString)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.TargetSite)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.StackTrace)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ServerName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.RequestURL)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UserAgent)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UserIP)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UserAuthentication)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UserName)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.EventId)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LogDateTime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Source)
                    </td>
                    <td>
                        @{
                            if (HttpUtility.HtmlDecode(item.Message).Length != null && HttpUtility.HtmlDecode(item.Message).Length > 100)
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.Message).Substring(0, 100).Trim())
                            }
                            else
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.Message).Trim())
                            }
                        }
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.QueryString)
                    </td>
                    <td>
                        @{
                            if (HttpUtility.HtmlDecode(item.TargetSite).Length != null && HttpUtility.HtmlDecode(item.TargetSite).Length > 100)
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.TargetSite).Substring(0, 100).Trim())
                            }
                            else
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.TargetSite).Trim())
                            }
                        }
                    </td>
                    <td>
                        @{
                            if (HttpUtility.HtmlDecode(item.StackTrace).Length != null && HttpUtility.HtmlDecode(item.StackTrace).Length > 100)
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.StackTrace).Substring(0, 100).Trim())
                            }
                            else
                            {
                                @Html.Raw(HttpUtility.HtmlDecode(item.StackTrace).Trim())
                            }
                        }
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ServerName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.RequestURL)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserAgent)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserIP)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserAuthentication)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserName)
                    </td>
                    <td>
                        @Html.ActionLink("Details", "Details", new { id = item.EventId }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.EventId })
                    </td>
                </tr>
            }
        </tbody>
</table>
    <div id="pager" style="position: none;">
        <form>
            <img src="@Url.Content("~/assets/images/pagination/first.png")" class="first" />
            <img src="@Url.Content("~/assets/images/pagination/prev.png")" class="prev" />
            <input type="text" class="pagedisplay" />
            <img src="@Url.Content("~/assets/images/pagination/next.png")" class="next" />
            <img src="@Url.Content("~/assets/images/pagination/last.png")" class="last" />
            <select class="pagesize">
                <option value="5">5</option>
                <option selected="selected" value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
            </select>
        </form>
    </div>
</div>